{% extends "layout.html.twig" %}

{% block content %}
    <div class="page-header">
        <h1>{{ project.name }} <small>by {{ project.username }}</small></h1>
    </div>

    <p>{{ project.description|markdown }}</p>

    <h2>
        Comments
        {% if comments|length %}
        <small>{{ comments|length }} of them</small>
        {% endif %}
    </h2>

    {% for comment in comments %}
        <blockquote>
            <p>{{ comment.content|markdown }}</p>
            <small>{{ comment.username }}</small>
        </blockquote>
    {% endfor %}

    <div>
        <form method="post" action="{{ path('project_comment', { "id": project.id }) }}">

            {{ form_errors(form) }}
            
            <fieldset>
                <div class="clearfix">
                    {{ form_label(form.content) }}
                    {{ form_errors(form.content) }}
                    <div class="input">
                        {{ form_widget(form.content, { "attr": { "class": "xlarge" } }) }}
                    </div>
                </div>
            </fieldset>

          {{ form_rest(form) }}

            <div class="actions">
                <button class="btn primary">Post comment</button>
            </div>
        </form>
    </div>
{% endblock %}